<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Smart Truck Dip Checking System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#3f6fa5;color:#fff}
header{padding:15px;text-align:center;background:#294e78;font-size:20px}
#breadcrumb{padding:8px 15px;background:#1c3550;font-size:13px}
.container{display:flex;justify-content:center;padding:20px}
.card{width:100%;max-width:420px;background:rgba(255,255,255,0.15);padding:20px;border-radius:12px}
.hidden{display:none}
button{width:100%;padding:12px;margin:8px 0;background:#1e88e5;border:none;border-radius:6px;color:#fff;font-size:15px}
input,select{
width:100%;
padding:8px;
margin:6px 0 10px;
border-radius:5px;
border:none;
color:#000;
}
input::placeholder{
color:#666;
opacity:1;
}
input.upper{text-transform:uppercase}
.popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;color:#000;padding:14px;border-radius:8px;display:none;z-index:100}
.smallBtn{background:#455a64;font-size:13px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:6px;font-size:13px;background:#fff;color:#000;text-align:center}
th{background:#1e88e5;color:#fff}

/* CUSTOM DATE HIDDEN INITIALLY */
#truckFromDate,#truckToDate,
#bayFromDate,#bayToDate,
#alertFromDate,#alertToDate{
display:none;
}
</style>
</head>

<body>

<header>ğŸš› Smart Truck Dip Checking System</header>
<div id="breadcrumb">Login</div>

<div class="container">
<div class="card">

<!-- LOGIN -->
<div id="loginScreen">
<input id="loginUser" class="upper" placeholder="Employee ID">
<input id="loginPass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<button class="smallBtn" onclick="openSignup()">Create Account</button>
<button class="smallBtn" onclick="openReset()">Forgot Password</button>
</div>

<!-- SIGNUP -->
<div id="signupScreen" class="hidden">
<h3>Create Account</h3>
<input id="signupUser" class="upper" placeholder="Employee ID">
<input id="signupPass" type="password" placeholder="Password">
<button onclick="signup()">Register</button>
<button class="smallBtn" onclick="openLogin()">Back</button>
</div>

<!-- RESET -->
<div id="resetScreen" class="hidden">
<h3>Reset Password</h3>
<input id="resetUser" class="upper" placeholder="Employee ID">
<input id="resetPass" type="password" placeholder="New Password">
<button onclick="resetPassword()">Reset</button>
<button class="smallBtn" onclick="openLogin()">Back</button>
</div>

<!-- HOME -->
<div id="homeScreen" class="hidden">
<p id="userInfo"></p>
<button onclick="openEntry()">ğŸšš Truck Data Entry</button>
<button onclick="openCalibration()">ğŸ§ª Calibration TT Entry</button>
<button onclick="openLocalLoading()">ğŸ›¢ Manual Local Loading Entry</button>
<button onclick="openAnalysisHome()">ğŸ“Š Truck & Bay Analysis</button>
<button class="smallBtn" onclick="logout()">Logout</button>
</div>

<!-- ANALYSIS HOME -->
<div id="analysisHomeScreen" class="hidden">
<h3>ğŸ“Š Truck & Bay Analysis</h3>
<button onclick="openTruckAnalysis()">ğŸšš Truck Analysis</button>
<button onclick="openBayAnalysis()">ğŸ…¿ï¸ Bay Analysis</button>
<button onclick="openAlertAnalysis()">ğŸš¨ Alerts</button>
<button class="smallBtn" onclick="goHome()">Back</button>
</div>

<!-- TRUCK ANALYSIS -->
<div id="truckAnalysisScreen" class="hidden">
<h3>ğŸšš Truck Analysis</h3>

<select id="truckDateFilter" onchange="toggleTruckCustomDate()">
<option value="30">Last 30 Days</option>
<option value="60">Last 60 Days</option>
<option value="custom">Custom Range</option>
</select>

<input type="date" id="truckFromDate">
<input type="date" id="truckToDate">

<button onclick="buildTruckAnalysis()">ğŸ” Load Analysis</button>
<button onclick="clearTruckSearch()">Clear</button>

<div id="truckSummary"></div>
<canvas id="truckPieChart"></canvas>

<hr>

<input id="searchTruckNo" class="upper" placeholder="Enter Truck Number">
<button onclick="searchTruckAnalysis()">SEARCH</button>

<div id="truckDetailResult"></div>

<button class="smallBtn" onclick="openAnalysisHome()">Back</button>
</div>

<!-- BAY ANALYSIS -->
<div id="bayAnalysisScreen" class="hidden">
<h3>ğŸ…¿ï¸ Bay Analysis</h3>

<select id="bayDateFilter" onchange="toggleBayCustomDate()">
<option value="30">Last 30 Days</option>
<option value="60">Last 60 Days</option>
<option value="custom">Custom Range</option>
</select>

<input type="date" id="bayFromDate">
<input type="date" id="bayToDate">

<select id="baySelect">
<option value="">Select Bay</option>
<option value="ALL">All Bays</option>
<option>1</option><option>2</option><option>3</option>
<option>4</option><option>5</option><option>6</option>
<option>7</option><option>8</option>
</select>

<button onclick="buildBayAnalysis()">ğŸ” Load Bay Analysis</button>

<div id="baySummary"></div>
<canvas id="bayBarChart"></canvas>

<div id="bayAlertResult"></div>

<button onclick="showAllLocalLoading()">View All Local Loading</button>

<button class="smallBtn" onclick="openAnalysisHome()">Back</button>
</div>

<!-- ALERT SCREEN (RESTORED - VERY IMPORTANT) -->
<div id="alertScreen" class="hidden">
<h3>ğŸš¨ Alerts</h3>

<select id="alertDateFilter" onchange="toggleAlertCustomDate()">
<option value="30">Last 30 Days</option>
<option value="60">Last 60 Days</option>
<option value="custom">Custom Range</option>
</select>

<input type="date" id="alertFromDate">
<input type="date" id="alertToDate">

<button onclick="buildAlertAnalysis()">Generate Alerts</button>
<div id="alertTable"></div>

<button class="smallBtn" onclick="openAnalysisHome()">Back</button>
</div>

<!-- TRUCK ENTRY -->
<div id="entryScreen" class="hidden">
<h3>Truck Data Entry</h3>
<input type="date" id="date">
<input id="truckNo" class="upper" placeholder="Truck Number">
<input type="number" id="bayNo" placeholder="Bay No (1â€“8)">
<input type="number" id="comp1" placeholder="Compart 1">
<input type="number" id="comp2" placeholder="Compart 2">
<input type="number" id="comp3" placeholder="Compart 3">
<input type="number" id="comp4" placeholder="Compart 4">
<input type="number" id="comp5" placeholder="Compart 5">
<button onclick="saveTruck()">ğŸ’¾ Save</button>
<button onclick="downloadTruckCSV()">â¬‡ Download Truck Data</button>
<button class="smallBtn" onclick="goHome()">Back</button>
</div>

<!-- CALIBRATION -->
<div id="calibrationScreen" class="hidden">
<h3>Calibration TT Entry</h3>
<input id="calTruckNo" class="upper" placeholder="Enter TT number">
<input type="date" id="calDate">
<button onclick="saveCalibration()">ğŸ’¾ Save Calibration</button>
<button onclick="showCalibrations()">ğŸ“‹ View Calibration Status</button>
<button onclick="downloadCalibrationCSV()">â¬‡ Download Calibration Data</button>
<div id="calibrationTable"></div>
<button class="smallBtn" onclick="goHome()">Back</button>
</div>

<!-- LOCAL LOADING CONFIRM -->
<div id="llConfirmScreen" class="hidden">
<h3 id="llConfirmText"></h3>
<button onclick="llConfirmYes()">YES</button>
<button class="smallBtn" onclick="llConfirmNo()">NO</button>
</div>

<!-- LOCAL LOADING -->
<div id="localLoadingScreen" class="hidden">
<h3>Local Loading Entry</h3>
<input type="date" id="llDate" placeholder="Date">


<select id="llType" onchange="toggleLocalLoadingType()">
<option value="">Local Loading Given To</option>
<option value="TANKER">Tanker Truck</option>
<option value="OWN_USE">Own Use</option>
<option value="OTHERS">Others</option>
</select>

<div id="llTanker" class="hidden">
<input id="llTruckNo" class="upper" placeholder="Enter Truck No.">
<input id="llBay" type="number" placeholder=" Enter Bay no.">
<input id="ll1" type="number" placeholder= "Compartment no.1">
<input id="ll2" type="number" placeholder= "Compartment no.2">
<input id="ll3" type="number" placeholder= "Compartment no.3">
<input id="ll4" type="number" placeholder= "Compartment no.4">
<input id="ll5" type="number" placeholder= "Compartment no.5">
<input id="llTotal" readonly placeholder= "Total litre">
</div>

<div id="llOther" class="hidden">
<input id="llBayOther" type="number" placeholder= "Enter Bay no.">
<input id="llQtyOther" type="number" placeholder= "Enter Qty">
<input id="llDetails" placeholder= " Enter details">
</div>

<button onclick="saveLocalLoading()">ğŸ’¾ Save</button>
<button onclick="downloadLocalLoadingCSV()">â¬‡ Download</button>
<button class="smallBtn" onclick="goHome()">Back</button>
</div>

</div>
</div>

<div id="popup" class="popup"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="app1.js"></script>

</body>
</html>
